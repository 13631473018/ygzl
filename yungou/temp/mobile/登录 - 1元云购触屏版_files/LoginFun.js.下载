$(function(){var b=function(){var h="_uName";var g=$("#txtAccount");var m=$("#txtPassword");var j=$("#showPWD");var d=$("#btnLogin");var p=false;var e=function(D){var C=/^1\d{10}$/;return C.test(D)};var c=function(D){var C=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;return C.test(D)};var A=function(D){var C=/^([\x00-\xff])+$/;return C.test(D)};var w=function(E){var D=/^([\x00-\xff]){6,20}$/;var C=/^\S{6,20}$/;return D.test(E)&&C.test(E)};var k=function(D){var C=/^[0-9A-Za-z]{4,6}$/;return C.test(D)};var s={txtStr:"请输入您的手机号码/邮箱",txtpwd:"请输入您的登录密码",errorU:"请输入正确的手机号/邮箱",errorP:"密码长度为6-20位字符",loginerr0:"登录密码不正确",loginerr1:"登录帐号未注册",loginerr2:"账号被冻结，请与客服联系",loginerr3:"失败次数超限，被冻结5分钟",loginerr4:"登录失败，请重试",showPWD:"显示密码",loginerr5:"必须输入帐号和密码",loginok:"登录成功",codeEmpty:"请输入验证码",codeFormatError:"请输入正确的验证码",codeError:"验证码输入错误"};var z={txtStr:"登录",checkCode:"正在登录"};var B=function(C){$.PageDialog.fail(C)};var i=function(D,C){$.PageDialog.ok(D,C)};var f=function(C,E){var F=E-C;var D=Math.random();return(C+Math.round(D*F))};var q=function(){var C='<input type="text" value="" id="txtCheckCode" placeholder="验证码" class="code"><s class="rs5"></s><div class="code-img"><img src="/api/CheckCode.html?rd='+f(1,10000)+'" alt="验证码" class="" id="imgCode"></div>';$("#dl_Code").empty().html(C).show()};var x=function(){$("#imgCode").attr("src","/api/checkcode.html?rd="+f(1,10000));$("#txtCheckCode").val("").focus()};$("#dl_Code").on("click","#imgCode",function(){x();return !1});var v=5*(1/24)*(1/60);var n="_SHOW_VC_CODE";if($.cookie(n)=="1"){q()}var l=function(D){var C=function(G,H,E){var F=new RegExp(H,"g");return G.replace(F,E)};var D=escape(D);D=C(D,"\\+","%2B");D=C(D,"/","%2F");return D};var u=function(){if(!isLoaded){return}var E=g.val().trim();var D=m.val().trim();var C="";if(E==""||E==s.txtStr){B(s.txtStr);return}else{if(D==""||D==s.txtpwd){B(s.txtpwd);return}else{if(!e(E)&&!c(E)){B(s.errorU);return}else{if(!w(D)){B(s.errorP);return}else{if($("#dl_Code").css("display")!="none"){C=$("#txtCheckCode").val().trim();if(C==""){B(s.codeEmpty);return}else{if(!k(C)){$("#txtCheckCode").val("").focus();B(s.codeFormatError);return}}}}}}}isLoaded=false;d.html(z.checkCode).addClass("grayBtn").unbind("click");$.post("https://m.1yyg.com/JPData",{action:"userlogin",name:E,pwd:D,vCode:C},function(G){var H=G.state;var F=G.num;if(H==0){d.hide();$.cookie(h,E,{domain:"1yyg.com",expires:1,path:"/"});GetJPData("","loginok","",function(I){var J=function(){var K=$("#hidLoginForward").val();if(K.length==0||K.indexOf("m.1yyg.com/passport/")>0){K="http://m.1yyg.com"}location.replace(K);return};i(s.loginok,J)})}else{if(H==1&&(F==-1||F==-6||F==-7)){if(G.str=="1"){q();if(F==-1){m.focus();B(s.loginerr0);$.cookie(n,1,{expires:v})}else{if(F==-6){if($("#txtCheckCode")!=null){$("#txtCheckCode").val("").focus();B(s.codeError)}}else{if($("#txtCheckCode")!=null){$("#txtCheckCode").val("").focus();B(s.codeEmpty)}}}}else{if($.cookie(n)=="1"){x()}m.focus();B(s.loginerr0)}}else{if(H==1&&F==-2){g.focus();B(s.loginerr1)}else{if(H==1&&F==-3){B(s.loginerr2)}else{if(H==3){B(s.loginerr3)}else{B(s.loginerr4)}}}}}isLoaded=true;d.html(z.txtStr).removeClass("grayBtn").bind("click",u)},"json")};var r="";var o;var t=function(){var C=o.val();if(r!=C){if(A(C)||C==""){r=C}else{o.val(r).focus()}}if(p){setTimeout(t,200)}};g.bind("focus",function(){$(this).attr("style","color:#666666");p=true;o=$(this);t()}).bind("blur",function(){p=false});m.bind("focus",function(){$(this).attr("style","color:#666666");p=true;o=$(this);t()}).bind("blur",function(){p=false});var y=function(){var C=$.cookie(h);if(C!=null){g.val(C).attr("style","color:#666666")}};y();d.bind("click",u);isLoaded=true};var a=function(){Base.getScript(Gobal.Skin+"/JS/pageDialog.js?v=130826",b)};Base.getScript(Gobal.Skin+"/JS/Comm.js?v=130826",a)});